<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>CJ ONSTYLE ì»¬ëŸ¬ ë¯¹ì„œ â€“ Vibrant Lime Match</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
  min-height: 100vh;
  padding: 24px;
  display: flex;
  justify-content: center;
  align-items: center;

  /* ë¼ì´íŠ¸ í¼í”Œ ë°°ê²½ìœ¼ë¡œ ë³€ê²½ */
  background: linear-gradient(135deg, #f5e8ff 0%, #ede1ff 40%, #d9c7ff 100%);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  color: #2a1d47;
}

.game-root {
  width: 760px;
  max-width: 100%;
  padding: 22px 26px;
  background: #ffffffdd;
  backdrop-filter: blur(10px);
  border-radius: 18px;

  /* ë³´ë¼ë¹› ìœ¤ê³½ */
  border: 2px solid #d3bfff;
  box-shadow: 0 8px 24px rgba(140, 90, 200, 0.18);
}

/* ë¸Œëœë“œ íƒœê·¸ */
.brand-tag {
  color: #7a5fc7;
}

/* ì œëª©/ì„œë¸Œ */
h1 {
  color: #3b1f72;
}
.subtitle {
  color: #533b9d;
}

/* ìƒë‹¨ íŒ¨ë„ */
.panel {
  background: #ffffffcc;
  backdrop-filter: blur(10px);
  border: 1px solid #dcd2ff;
  border-radius: 14px;
  color: #2f2458;
}

/* Target / Mix ë¼ë²¨ */
.panel-pill.target {
  background: #d8fff1;
  border-color: #23e896;
  color: #0b4c38;
}
.panel-pill.mix {
  background: #efe4ff;
  border-color: #bca4ff;
  color: #5837b8;
}

/* ìƒ‰ì¹© */
.swatch {
  border: 2px solid rgba(90, 66, 140, 0.4);
  box-shadow: 0 0 0 1px rgba(120, 90, 190, 0.2);
}

/* íŒ”ë ˆíŠ¸ ìƒ‰ ë°•ìŠ¤ */
.paint {
  border: 1px solid rgba(120, 90, 190, 0.25);
  box-shadow: 0 2px 10px rgba(120, 90, 190, 0.25);
}
.paint:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(120, 90, 190, 0.35);
}

/* ë²„íŠ¼ */
.btn-primary {
  background: linear-gradient(135deg, #23e896, #a3ffaf);
  color: #04341f;
}
.btn-secondary {
  background: #ffffffaa;
  border: 1px solid #c8b3ff;
  color: #4b368b;
}

/* ê²°ê³¼ ë°•ìŠ¤ */
.result-row {
  border-top: 1px solid #c9b4ff;
}
.match-score {
  color: #23e896;
}
.result-note {
  color: #4a2f97;
}

  </style>
</head>
<body>
  <div class="game-root">
    <div class="brand-tag">CJ ONSTYLE Â· INSPIRING PURPLE Ã— VIBRANT LIME</div>
    <h1>Vibrant Lime ì»¬ëŸ¬ ë¯¹ì„œ</h1>
    <div class="subtitle">
      í°ìƒ‰ Â· ê²€ì€ìƒ‰ Â· ë…¸ë€ìƒ‰ Â· íŒŒë€ìƒ‰ Â· ë¹¨ê°„ìƒ‰ë§Œìœ¼ë¡œ CJ ONSTYLEì˜<br />
      ì‹œê·¸ë‹ˆì²˜ ë¼ì„ê·¸ë¦°ì— ì–¼ë§ˆë‚˜ ê°€ê¹Œì´ ê°ˆ ìˆ˜ ìˆì„ê¹Œìš”?
    </div>

    <div class="top-row">
      <!-- ëª©í‘œìƒ‰ íŒ¨ë„ -->
      <div class="panel">
        <div class="panel-header">
          <div class="panel-title">
            <div class="panel-pill target">Target</div>
            <span class="panel-label">ëª©í‘œ ì»¬ëŸ¬ â€“ Vibrant Lime</span>
          </div>
        </div>
        <div class="swatch-row">
          <div class="swatch" id="target-swatch"></div>
          <div>
            <div class="panel-text-main" id="target-name">#23E896</div>
            <div class="panel-rgb" id="target-rgb">RGB(35, 232, 150)</div>
            <div class="panel-desc">
              CJ ONSTYLE ì•„ì´ë´í‹°í‹°ì—ì„œ Inspiring Purpleê³¼ í•¨ê»˜ ì“°ì´ëŠ”
              ë„¤ì˜¨ ë¼ì„ í¬ì¸íŠ¸ ì»¬ëŸ¬ì…ë‹ˆë‹¤.
            </div>
          </div>
        </div>
      </div>

      <!-- ë¯¹ìŠ¤ëœ ìƒ‰ íŒ¨ë„ -->
      <div class="panel">
        <div class="panel-header">
          <div class="panel-title">
            <div class="panel-pill mix">Mix</div>
            <span class="panel-label">ë‚´ê°€ ë§Œë“  ì»¬ëŸ¬</span>
          </div>
        </div>
        <div class="swatch-row">
          <div class="swatch" id="mix-swatch"></div>
          <div>
            <div class="panel-text-main" id="mix-label">
              ì•„ì§ ë¬¼ê°ì„ ë„£ì§€ ì•Šì•˜ì–´ìš”
            </div>
            <div class="panel-rgb" id="mix-rgb">RGB(0, 0, 0)</div>
            <div class="drops-info">
              ì‚¬ìš©í•œ ë¬¼ê° ë°©ìš¸ ìˆ˜:
              <span id="drop-count">0</span>
            </div>
            <div class="drops-bar">
              <div class="drops-bar-inner" id="drops-bar-inner"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- íŒ”ë ˆíŠ¸ ì„¹ì…˜ -->
    <div class="palette-section">
      <div class="palette-header">
        <div>ğŸ¨ íŒ”ë ˆíŠ¸ì—ì„œ ë¬¼ê°ì„ ê³¨ë¼ í•œ ë°©ìš¸ì”© ë–¨ì–´ëœ¨ë¦¬ì„¸ìš”.</div>
        <span>í´ë¦­í•  ë•Œë§ˆë‹¤ 1ë°©ìš¸ Â· ì¡°ìƒ‰ íšŸìˆ˜ ì œí•œ ì—†ìŒ</span>
      </div>
      <div class="palette-grid" id="palette"></div>
    </div>

    <!-- ë²„íŠ¼ -->
    <div class="controls">
      <button class="btn-primary" id="btn-result">ê²°ê³¼ ë³´ê¸° (Vibrant Limeê³¼ ë¹„êµ)</button>
      <button class="btn-secondary" id="btn-reset">ì „ì²´ ì´ˆê¸°í™”</button>
    </div>

    <div class="helper-text">
      <span>ì—¬ëŸ¬ ìƒ‰ì„ ì„ì„ìˆ˜ë¡ í•œ ë°©ìš¸ì˜ ì˜í–¥ì€ ì‘ì•„ì§‘ë‹ˆë‹¤.</span>
      <span>ì›í•˜ë©´ í•œ ê°€ì§€ ìƒ‰ë§Œìœ¼ë¡œë„ ì–¼ë§ˆë‚˜ ê°€ê¹Œìš´ì§€ í…ŒìŠ¤íŠ¸í•´ ë³´ì„¸ìš”.</span>
    </div>

    <!-- ê²°ê³¼ ì˜ì—­ -->
    <div class="result-row" id="result-row" style="display:none;">
      <div class="result-main">
        <div class="match-score" id="match-score">0%</div>
        <div id="match-text">ì•„ì§ ê²°ê³¼ë¥¼ ë³´ì§€ ì•Šì•˜ì–´ìš”.</div>
      </div>
      <div class="result-note" id="match-note"></div>
    </div>
  </div>

  <script>
    // === ëª©í‘œìƒ‰: ì´ë¯¸ì§€ì—ì„œ ì½ì€ Vibrant Lime (#23E896, RGB 35/232/150) ===
    const TARGET = {
      hex: "#23E896",
      rgb: [35, 232, 150]
    };

    // === ì‚¬ìš©í•  ë¬¼ê° 5ê°€ì§€ (í™”ë©´ìš© RGB ê°’) ===
    const PAINTS = [
      { id: "white", nameKo: "í™”ì´íŠ¸", nameEn: "White",  rgb: [255, 255, 255] },
      { id: "black", nameKo: "ë¸”ë™",   nameEn: "Black",  rgb: [0, 0, 0] },
      { id: "yellow",nameKo: "ì˜ë¡œìš°", nameEn: "Yellow", rgb: [255, 224, 0] },
      { id: "blue",  nameKo: "ë¸”ë£¨",   nameEn: "Blue",   rgb: [0, 105, 255] },
      { id: "red",   nameKo: "ë ˆë“œ",   nameEn: "Red",    rgb: [235, 51, 72] },
    ];

    const targetSwatch = document.getElementById("target-swatch");
    const targetRgbEl = document.getElementById("target-rgb");

    const mixSwatch = document.getElementById("mix-swatch");
    const mixLabelEl = document.getElementById("mix-label");
    const mixRgbEl = document.getElementById("mix-rgb");
    const dropCountEl = document.getElementById("drop-count");
    const dropsBarInner = document.getElementById("drops-bar-inner");

    const paletteEl = document.getElementById("palette");
    const btnResult = document.getElementById("btn-result");
    const btnReset = document.getElementById("btn-reset");

    const resultRow = document.getElementById("result-row");
    const matchScoreEl = document.getElementById("match-score");
    const matchTextEl = document.getElementById("match-text");
    const matchNoteEl = document.getElementById("match-note");

    let drops = [];       // {rgb: [r,g,b], paintId: string}
    let mixedColor = [0, 0, 0];

    // --- ìœ í‹¸ ---
    const rgbToCss = ([r,g,b]) => `rgb(${r}, ${g}, ${b})`;

    const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

    function colorDistance(c1, c2) {
      const dr = c1[0] - c2[0];
      const dg = c1[1] - c2[1];
      const db = c1[2] - c2[2];
      return Math.sqrt(dr*dr + dg*dg + db*db);
    }

    // --- ì´ˆê¸° ì„¸íŒ… ---
    function initTargetView() {
      targetSwatch.style.backgroundColor = rgbToCss(TARGET.rgb);
      targetRgbEl.textContent = `RGB(${TARGET.rgb[0]}, ${TARGET.rgb[1]}, ${TARGET.rgb[2]})`;
    }

    function renderPalette() {
      // ê° ë¬¼ê°ë³„ ë°©ìš¸ ìˆ˜ ì§‘ê³„
      const usage = {};
      PAINTS.forEach(p => usage[p.id] = 0);
      drops.forEach(d => usage[d.paintId]++);

      paletteEl.innerHTML = "";
      PAINTS.forEach(paint => {
        const card = document.createElement("div");
        card.className = "paint";
        card.style.background = rgbToCss(paint.rgb);

        const inner = document.createElement("div");
        inner.className = "paint-inner";

        const label = document.createElement("div");
        label.className = "paint-label";
        label.textContent = paint.nameKo;

        const meta = document.createElement("div");
        meta.className = "paint-meta";
        const count = usage[paint.id] || 0;
        meta.textContent = count > 0 ? `${count}ë°©ìš¸` : paint.nameEn;

        inner.appendChild(label);
        inner.appendChild(meta);
        card.appendChild(inner);

        card.addEventListener("click", () => addDrop(paint));

        paletteEl.appendChild(card);
      });
    }

    function recalcMixedColor() {
      if (drops.length === 0) {
        mixedColor = [0, 0, 0];
      } else {
        let r = 0, g = 0, b = 0;
        drops.forEach(d => {
          r += d.rgb[0];
          g += d.rgb[1];
          b += d.rgb[2];
        });
        r = Math.round(r / drops.length);
        g = Math.round(g / drops.length);
        b = Math.round(b / drops.length);
        mixedColor = [r, g, b];
      }
      updateMixView();
    }

    function updateMixView() {
      mixSwatch.style.backgroundColor = rgbToCss(mixedColor);
      mixRgbEl.textContent = `RGB(${mixedColor[0]}, ${mixedColor[1]}, ${mixedColor[2]})`;
      dropCountEl.textContent = drops.length.toString();
      dropsBarInner.style.width = `${clamp(drops.length / 30 * 100, 0, 100)}%`;

      if (drops.length === 0) {
        mixLabelEl.textContent = "ì•„ì§ ë¬¼ê°ì„ ë„£ì§€ ì•Šì•˜ì–´ìš”";
      } else {
        mixLabelEl.textContent = `${drops.length}ë°©ìš¸ì˜ ë¬¼ê°ì´ ì„ì—¬ ìˆìŠµë‹ˆë‹¤`;
      }
    }

    function addDrop(paint) {
      drops.push({ rgb: paint.rgb.slice(), paintId: paint.id });
      recalcMixedColor();
      renderPalette();
      // ìƒˆë¡œ ì¡°ìƒ‰ë˜ë©´ ì´ì „ ê²°ê³¼ëŠ” ìˆ¨ê¹€
      resultRow.style.display = "none";
    }

    function resetAll() {
      drops = [];
      mixedColor = [0, 0, 0];
      renderPalette();
      recalcMixedColor();
      resultRow.style.display = "none";
    }

    function showResult() {
      if (drops.length === 0) {
        matchScoreEl.textContent = "0%";
        matchTextEl.textContent = "ì•„ì§ ì•„ë¬´ ë¬¼ê°ë„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì–´ìš”.";
        matchNoteEl.textContent = "íŒ”ë ˆíŠ¸ì—ì„œ ë¬¼ê°ì„ ê³¨ë¼ ì—¬ëŸ¬ ë°©ìš¸ ì„ì€ ë’¤ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.";
        resultRow.style.display = "block";
        return;
      }

      const dist = colorDistance(TARGET.rgb, mixedColor);
      const maxDist = Math.sqrt(255*255*3); // ~441.67
      let score = Math.round(100 - (dist / maxDist) * 100);
      score = clamp(score, 0, 100);

      matchScoreEl.textContent = `${score}%`;

      let text = "";
      let note = "";

      if (score >= 90) {
        text = "CJ ONSTYLEì˜ Vibrant Limeì— ê±°ì˜ ì™„ë²½í•˜ê²Œ ë„ë‹¬í–ˆì–´ìš”.";
        note = "ë©”ì¸ í™”ë©´ ì•¡ì„¼íŠ¸ ì»¬ëŸ¬ë¡œ ë°”ë¡œ ì¨ë„ ë  ì •ë„ì˜ ì •ë°€í•œ ì¡°ìƒ‰ì…ë‹ˆë‹¤.";
      } else if (score >= 75) {
        text = "Vibrant Limeì˜ ë¶„ìœ„ê¸°ë¥¼ ì˜ ì¡ì•„ëƒˆì–´ìš”.";
        note = "ì±„ë„Â·ëª…ë„ë¥¼ ì¡°ê¸ˆë§Œ ë” ì¡°ì •í•˜ë©´ ì‹¤ì œ ë¸Œëœë“œ ì»¬ëŸ¬ì™€ ë” ê°€ê¹Œì›Œì§ˆ ìˆ˜ ìˆì–´ìš”.";
      } else if (score >= 55) {
        text = "ë¸Œëœë“œ ë¼ì„ì—ì„œ íŒŒìƒëœ ìƒˆë¡œìš´ ë³€ì£¼ ì»¬ëŸ¬ì…ë‹ˆë‹¤.";
        note = "ë¸Œëœë“œ ì„œë¸Œ ìš”ì†Œë‚˜ ê·¸ë˜í”½ ëª¨í‹°í”„ë¡œ í™œìš©í•´ ë³¼ ìˆ˜ ìˆëŠ” í†¤ì…ë‹ˆë‹¤.";
      } else if (score >= 30) {
        text = "ê½¤ ë‹¤ë¥¸ ë°©í–¥ì˜ ê°ì„± ì»¬ëŸ¬ì˜ˆìš”.";
        note = "ì¸ìŠ¤íŒŒì´ì–´ë§ í¼í”Œê³¼ ì¡°í•©í•˜ë©´ ë˜ ë‹¤ë¥¸ ë¬´ë“œì˜ ë¸Œëœë“œ ë¹„ì£¼ì–¼ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
      } else {
        text = "ì™„ì „íˆ ìƒˆë¡œìš´ íŒ”ë ˆíŠ¸ë¡œ íƒˆì£¼í–ˆìŠµë‹ˆë‹¤.";
        note = "Vibrant Limeê³¼ëŠ” ê±°ë¦¬ê°€ ë©€ì§€ë§Œ, ì‹¤í—˜ì ì¸ ìº í˜ì¸ì´ë‚˜ ì‹œì¦Œ í•œì • ì»¬ëŸ¬ë¡œ ìƒìƒí•´ë³¼ ìˆ˜ ìˆì–´ìš”.";
      }

      matchTextEl.textContent = text;
      matchNoteEl.textContent = note;
      resultRow.style.display = "block";
    }

    // ì´ˆê¸° ì‹¤í–‰
    initTargetView();
    renderPalette();
    recalcMixedColor();

    btnResult.addEventListener("click", showResult);
    btnReset.addEventListener("click", resetAll);

    // í•„ìš”í•˜ë‹¤ë©´ ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” navigator.onLine ìœ¼ë¡œ
    // ì˜¤í”„ë¼ì¸ì¼ ë•Œë§Œ ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë…¸ì¶œí•˜ë„ë¡ ì¡°ê±´ì„ ê±¸ë©´ ë©ë‹ˆë‹¤.
  </script>
</body>
</html>

