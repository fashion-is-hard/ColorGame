<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>CJ ONSTYLE Â· Vibrant Lime ì»¬ëŸ¬ ë¯¹ì„œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* ===== ê¸°ì¡´ ë¼ì´íŠ¸í•œ í¼í”Œ UI ê·¸ëŒ€ë¡œ ìœ ì§€ ===== */

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      padding: 24px;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #f9efff 0%, #efe3ff 40%, #dfd0ff 100%);
      font-family: system-ui, sans-serif;
      color: #2a1d47;
    }

    .game-root {
      width: 780px;
      max-width: 100%;
      padding: 24px 26px;
      background: #ffffffee;
      backdrop-filter: blur(12px);
      border-radius: 20px;
      border: 2px solid #d5c3ff;
      box-shadow: 0 18px 40px rgba(132,96,205,0.25);
    }

    .brand-tag {
      font-size: 11px; letter-spacing:0.14em; text-transform:uppercase;
      color:#7c60c9; margin-bottom:4px;
    }
    h1 { font-size:22px; color:#36205f; margin-bottom:4px; }
    .subtitle { font-size:12px; color:#54379f; opacity:.9; margin-bottom:16px;line-height:1.4; }

    .top-row { display:flex; gap:14px; margin-bottom:16px; flex-wrap:wrap; }

    .panel {
      flex:1 1 330px;
      padding:12px;
      border-radius:16px;
      border:1px solid #ded3ff;
      background:#fbf8ff;
    }

    .panel-pill {
      padding:3px 10px; border-radius:999px;
      border:1px solid #c6b7ff;
      background:#f3ecff; font-size:10px; text-transform:uppercase;
      letter-spacing:.08em; color:#5a3ebb;
    }
    .panel-pill.target {
      background:#d8fff1; border-color:#23e896; color:#055334;
    }

    .swatch {
      width:74px; height:74px; border-radius:14px;
      border:2px solid rgba(98,77,158,0.45);
      background:#eee;
    }

    .palette-section {
      padding:12px; border-radius:16px;
      border:1px solid #ded3ff;
      background:#faf6ff; margin-bottom:14px;
    }

    .palette-grid {
      display:grid;
      grid-template-columns:repeat(5,minmax(0,1fr));
      gap:10px;
    }

    .paint {
      position:relative; padding-top:70%;
      border-radius:12px; cursor:pointer;
      border:1px solid rgba(116,94,188,0.25);
      background:#eee;
    }
    .paint-inner {
      position:absolute; inset:0;
      display:flex; flex-direction:column; justify-content:space-between;
      padding:6px 8px; font-weight:600; font-size:12px;
    }
    .paint-label {
      background:#ffffffdd; padding:2px 6px;
      font-size:11px; border-radius:999px;
    }
    .paint-meta {
      background:rgba(0,0,0,0.45); color:#fff;
      padding:2px 6px; font-size:10px; border-radius:999px;
    }

    button {
      flex:1; padding:11px 14px; border-radius:999px;
      border:none; font-size:13px; font-weight:700; cursor:pointer;
    }
    .btn-primary {
      background:linear-gradient(120deg,#23e896,#b4ff9a);
      color:#033522;
    }
    .btn-secondary {
      background:#fff; border:1px solid #cbb8ff; color:#54349b;
    }

    .result-row { display:none; }

    .result-card {
      margin-top:4px; padding:12px 14px;
      border-radius:18px; background:#ffffff;
      border:1px solid #d6c5ff;
      display:grid; grid-template-columns:1.4fr 1fr; gap:12px;
    }

    .result-swatch-box {
      width:100%; height:40px; border-radius:12px;
      border:1px solid rgba(98,77,158,0.45);
      background:#eee;
    }

  </style>
</head>

<body>
<div class="game-root">
  <div class="brand-tag">CJ ONSTYLE Â· VIBRANT LIME</div>
  <h1>Vibrant Lime ì»¬ëŸ¬ ë¯¹ì„œ</h1>
  <div class="subtitle">
    ë‹¤ì„¯ ê°€ì§€ ë² ì´ìŠ¤ ì»¬ëŸ¬ë¡œ ëª©í‘œ Vibrant Limeì— ë„ë‹¬í•´ë³´ì„¸ìš”.
  </div>

  <div class="top-row">
    <!-- ëª©í‘œìƒ‰ -->
    <div class="panel">
      <div class="panel-pill target">Target</div>
      <div style="display:flex; gap:12px; margin-top:8px;">
        <div class="swatch" id="target-swatch"></div>
        <div>
          <div style="font-size:14px;">#23E896</div>
          <div style="opacity:.8;">RGB(35,232,150)</div>
        </div>
      </div>
    </div>

    <!-- ë‚´ê°€ ë§Œë“  ìƒ‰ -->
    <div class="panel">
      <div class="panel-pill">Mix</div>
      <div style="display:flex; gap:12px; margin-top:8px;">
        <div class="swatch" id="mix-swatch"></div>
        <div>
          <div id="mix-label" style="font-size:14px;">ì•„ì§ ë¬¼ê°ì„ ë„£ì§€ ì•Šì•˜ì–´ìš”</div>
          <div id="mix-rgb" style="opacity:.8;">RGB(0,0,0)</div>
          <div style="font-size:11px; margin-top:6px;">
            ì‚¬ìš©í•œ ë¬¼ê° ìˆ˜: <span id="drop-count">0</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- íŒ”ë ˆíŠ¸ -->
  <div class="palette-section">
    <div style="margin-bottom:10px; color:#3b2667;">
      ğŸ¨ íŒ”ë ˆíŠ¸ì—ì„œ ìƒ‰ì„ ê³¨ë¼ í•œ ë°©ìš¸ì”© ë–¨ì–´ëœ¨ë¦¬ì„¸ìš”.
    </div>
    <div class="palette-grid" id="palette"></div>
  </div>

  <!-- ë²„íŠ¼ -->
  <div style="display:flex; gap:10px; margin-bottom:8px;">
    <button class="btn-primary" id="btn-result">ê²°ê³¼ ë³´ê¸°</button>
    <button class="btn-secondary" id="btn-reset">ì „ì²´ ì´ˆê¸°í™”</button>
  </div>

  <!-- ê²°ê³¼ -->
  <div class="result-row" id="result-row">
    <div class="result-card">
      <div>
        <div style="font-size:11px; text-transform:uppercase;">Result</div>
        <div style="display:flex; align-items:center; gap:6px;">
          <div id="match-score" style="font-size:30px; color:#23e896;">0%</div>
          <div id="match-text" style="font-size:13px;">ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</div>
        </div>
        <div id="match-note" style="margin-top:4px; font-size:11px;"></div>
      </div>

      <div>
        <div style="font-size:10px;">Your Mix</div>
        <div class="result-swatch-box" id="result-mix"></div>
        <div id="result-badge" style="margin-top:6px; font-size:11px;"></div>
      </div>
    </div>
  </div>
</div>

<script>
/* ===== ëª©í‘œìƒ‰ ===== */
const TARGET = { rgb:[35,232,150] };

/* ===== ë‚œì´ë„ ìƒ íŒ”ë ˆíŠ¸ ===== */
const PAINTS = [
  { id:"snow",   nameKo:"ìŠ¤ë…¸ìš° í™”ì´íŠ¸", rgb:[250,250,250] },
  { id:"purple", nameKo:"ë¡œì—´ í¼í”Œ",    rgb:[130,60,205] },
  { id:"yellow", nameKo:"ì• ì‹œë“œ ì˜ë¡œìš°", rgb:[255,255,40] },
  { id:"mint",   nameKo:"ë”¥ ë¯¼íŠ¸",      rgb:[45,242,135] },
  { id:"cyan",   nameKo:"ì˜¤ì…˜ ì‹œì•ˆ",    rgb:[20,205,195] },
];

/* ===== DOM ===== */
const targetSwatch = document.getElementById("target-swatch");
const mixSwatch = document.getElementById("mix-swatch");
const mixLabelEl = document.getElementById("mix-label");
const mixRgbEl = document.getElementById("mix-rgb");
const dropCountEl = document.getElementById("drop-count");
const paletteEl = document.getElementById("palette");
const btnResult = document.getElementById("btn-result");
const btnReset = document.getElementById("btn-reset");
const resultRow = document.getElementById("result-row");
const matchScoreEl = document.getElementById("match-score");
const matchTextEl = document.getElementById("match-text");
const matchNoteEl = document.getElementById("match-note");
const resultMixSwatch = document.getElementById("result-mix");
const resultBadge = document.getElementById("result-badge");

/* ===== ìƒíƒœ ===== */
let drops = [];
let mixedColor = [0,0,0];
let isLocked = false;

/* ===== ìœ í‹¸ ===== */
const rgbToCss = (c)=>`rgb(${c[0]},${c[1]},${c[2]})`;
const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));
function colorDistance(c1,c2){
  const dr=c1[0]-c2[0], dg=c1[1]-c2[1], db=c1[2]-c2[2];
  return Math.sqrt(dr*dr + dg*dg + db*db);
}

/* ===== ì´ˆê¸° ===== */
targetSwatch.style.backgroundColor = rgbToCss(TARGET.rgb);
resultMixSwatch.style.backgroundColor = "#000";

/* ===== íŒ”ë ˆíŠ¸ ë Œë” ===== */
function renderPalette(){
  const usage={}; PAINTS.forEach(p=>usage[p.id]=0);
  drops.forEach(d=>usage[d.paintId]++);

  paletteEl.innerHTML="";
  PAINTS.forEach(p=>{
    const card=document.createElement("div");
    card.className="paint";
    card.style.background=rgbToCss(p.rgb);

    const inner=document.createElement("div");
    inner.className="paint-inner";

    const label=document.createElement("div");
    label.className="paint-label"; label.textContent=p.nameKo;

    const meta=document.createElement("div");
    meta.className="paint-meta";
    meta.textContent = usage[p.id] ? `${usage[p.id]}ë°©ìš¸` : "";

    inner.appendChild(label); inner.appendChild(meta);
    card.appendChild(inner);

    card.addEventListener("click",()=>{
      if(!isLocked) addDrop(p);
    });

    paletteEl.appendChild(card);
  });
}

/* ===== ìƒ‰ ì„ê¸° ===== */
function recalcMixedColor(){
  if(drops.length===0){ mixedColor=[0,0,0]; updateMixView(); return; }

  let r=0,g=0,b=0;
  drops.forEach(d=>{ r+=d.rgb[0]; g+=d.rgb[1]; b+=d.rgb[2]; });
  mixedColor=[ Math.round(r/drops.length), Math.round(g/drops.length), Math.round(b/drops.length) ];

  updateMixView();
}

function updateMixView(){
  mixSwatch.style.backgroundColor=rgbToCss(mixedColor);
  mixRgbEl.textContent=`RGB(${mixedColor[0]},${mixedColor[1]},${mixedColor[2]})`;
  dropCountEl.textContent=drops.length;
  mixLabelEl.textContent = drops.length===0 ? "ì•„ì§ ë¬¼ê°ì„ ë„£ì§€ ì•Šì•˜ì–´ìš”" : `${drops.length}ë°©ìš¸ ì„ìŒ`;
}

function addDrop(p){
  drops.push({rgb:p.rgb.slice(),paintId:p.id});
  recalcMixedColor();
  renderPalette();
  resultRow.style.display="none";
}

/* ===== ì´ˆê¸°í™” ===== */
function resetAll(){
  drops=[]; mixedColor=[0,0,0];
  isLocked=false;
  recalcMixedColor(); renderPalette();
  resultRow.style.display="none";
}

/* ===== ê²°ê³¼ ë³´ê¸° ===== */
function showResult(){
  if(drops.length===0){
    matchScoreEl.textContent="0%";
    matchTextEl.textContent="ë¬¼ê°ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì–´ìš”.";
    matchNoteEl.textContent="ë¨¼ì € íŒ”ë ˆíŠ¸ì—ì„œ ìƒ‰ì„ ì„ì–´ë³´ì„¸ìš”.";
    resultMixSwatch.style.backgroundColor="#000";
    resultBadge.textContent="0ë°©ìš¸";
    resultRow.style.display="block";
    isLocked=true;
    return;
  }

  const dist=colorDistance(TARGET.rgb, mixedColor);
  const maxDist=Math.sqrt(255*255*3);
  let score = Math.round(100 - (dist/maxDist)*100);
  score = clamp(score,0,100);

  matchScoreEl.textContent=`${score}%`;

  if(score===100){
    matchTextEl.textContent="ì™„ë²½í•˜ê²Œ ì¼ì¹˜í•©ë‹ˆë‹¤!";
    matchNoteEl.textContent="ë¸Œëœë“œ ì‹œê·¸ë‹ˆì²˜ Vibrant Limeê³¼ 100% ë™ì¼í•œ ê°’ì´ì—ìš”.";
  }else{
    matchTextEl.textContent = score>80 ? "ë§¤ìš° ê·¼ì ‘í–ˆì–´ìš”!" :
                                score>60 ? "ê½¤ ë¹„ìŠ·í•´ìš”." :
                                score>40 ? "ë‹¤ë¥¸ ë¬´ë“œì˜ ì»¬ëŸ¬ë„¤ìš”." :
                                "ì•„ì§ ë©€ì—ˆì–´ìš”!";
    matchNoteEl.textContent="í•œ ë‹¨ê³„ì”© ë¹„ìœ¨ì„ ë°”ê¿”ë³´ë©° ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.";
  }

  resultMixSwatch.style.backgroundColor = rgbToCss(mixedColor);
  resultBadge.textContent=`${drops.length}ë°©ìš¸`;

  resultRow.style.display="block";
  isLocked=true;
}

/* ===== ì‹¤í–‰ ===== */
renderPalette();
recalcMixedColor();
btnReset.onclick=resetAll;
btnResult.onclick=showResult;

</script>
</body>
</html>
